<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>M. Sharma | Cyber Academy</title>

<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&family=JetBrains+Mono&display=swap" rel="stylesheet">

<style>
body {
  background:#07090d;
  color:#e5e7eb;
  font-family:'Space Grotesk',sans-serif;
  margin:0;
}
.mono { font-family:'JetBrains Mono',monospace }
.glass {
  background:rgba(255,255,255,.06);
  backdrop-filter:blur(12px);
  border:1px solid rgba(255,255,255,.08);
  border-radius: 10px;
}
.primary { color:#7dd3fc }
.primary-bg { background:#7dd3fc; color:#020617 }
.card-hover:hover { background:rgba(125,211,252,.1); transform:translateY(-3px); transition:.3s; }
.hamburger span { display:block;width:25px;height:3px;margin:5px;background:#7dd3fc; }
.menu { display:none; position:fixed; top:0; left:0; height:100%; width:250px; background:#000; padding:2rem; z-index:60; flex-direction:column; gap:1.5rem; }
.menu.show { display:flex }
button { cursor:pointer; }
.modal-bg { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,.7); z-index:100; justify-content:center; align-items:center; }
.modal-content { background:#07090d; padding:2rem; border-radius:10px; max-width:500px; width:90%; }
</style>
</head>

<body>

<!-- NAV -->
<nav class="fixed w-full z-50 flex justify-between items-center px-4 py-4 glass">
  <div class="hamburger md:hidden" id="hamburger"><span></span><span></span><span></span></div>
  <div class="mono uppercase tracking-widest text-sm">M. Sharma // Cyber Academy</div>
  <div class="hidden md:flex gap-4 text-xs uppercase tracking-widest opacity-70">
    <a href="#courses">Courses</a>
    <a href="#books">Books</a>
    <a href="#tools">Tools</a>
    <a href="#ctf">CTF</a>
    <a href="#learning">Learning</a>
    <a href="#login">Login</a>
    <a href="#contact">Contact</a>
  </div>
</nav>

<div class="menu" id="mobileMenu">
  <a href="#courses">Courses</a>
  <a href="#books">Books</a>
  <a href="#tools">Tools</a>
  <a href="#ctf">CTF</a>
  <a href="#learning">Learning</a>
  <a href="#login">Login</a>
  <a href="#contact">Contact</a>
</div>

<!-- Main Container -->
<div id="pageContent" class="pt-24"></div>

<!-- Modal -->
<div id="modal" class="modal-bg flex">
  <div class="modal-content">
    <h4 id="modalTitle" class="text-xl font-bold primary mb-2"></h4>
    <img id="modalImage" class="w-full h-48 object-cover rounded mb-4"/>
    <p id="modalDesc" class="text-sm opacity-60 mb-4"></p>
    <button id="modalAction" class="px-4 py-2 bg-primary text-black rounded"></button>
    <button id="modalClose" class="px-4 py-2 ml-2 border border-white/30 rounded">Close</button>
  </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";

// Firebase config
const firebaseConfig = {
  apiKey: "AIzaSyBsnsYzyQF-ufzTYmWpPUAPSKwhQrDW-0U",
  authDomain: "ideas-hub-250c8.firebaseapp.com",
  projectId: "ideas-hub-250c8",
  storageBucket: "ideas-hub-250c8.firebasestorage.app",
  messagingSenderId: "878672371620",
  appId: "1:878672371620:web:d7c771a2f75f4f573d6b31"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const auth = getAuth(app);

// Mobile menu
const hamburger = document.getElementById("hamburger");
const mobileMenu = document.getElementById("mobileMenu");
hamburger.onclick = () => mobileMenu.classList.toggle("show");
document.querySelectorAll('a[href^="#"]').forEach(a=>{
  a.onclick=e=>{
    e.preventDefault();
    location.hash=a.getAttribute("href");
    mobileMenu.classList.remove("show");
  }
});

// Modal Elements
const modal = document.getElementById("modal");
const modalTitle = document.getElementById("modalTitle");
const modalImage = document.getElementById("modalImage");
const modalDesc = document.getElementById("modalDesc");
const modalAction = document.getElementById("modalAction");
const modalClose = document.getElementById("modalClose");
modalClose.onclick=()=>modal.style.display="none";

// Mock Data
const courses=[{title:"Ethical Hacking Essentials",desc:"Intro to web & network security",img:"https://source.unsplash.com/400x300/?cybersecurity",status:"Coming Soon"},
{title:"Web Penetration Testing",desc:"Learn XSS, SQLi safely",img:"https://source.unsplash.com/400x300/?hacker",status:"Coming Soon"}];
const books=[{title:"Kali Linux Cheatsheet",desc:"Commands & tools",img:"https://source.unsplash.com/400x300/?kali-linux",price:49},
{title:"The Hacker's Playbook",desc:"Methodology & mindset",img:"https://source.unsplash.com/400x300/?hacking",price:49}];
const tools=[{title:"Keylogger",desc:"Lab use only",img:"https://source.unsplash.com/400x300/?keylogger"},
{title:"Spyware",desc:"Defensive research",img:"https://source.unsplash.com/400x300/?spyware"}];
const ctf=[{title:"CTF Challenges",desc:"Web, crypto, reverse",img:"https://source.unsplash.com/400x300/?ctf"},
{title:"Daily Hunters",desc:"Daily security puzzles",img:"https://source.unsplash.com/400x300/?puzzle"}];
const learning=[{title:"Latest Free Courses",desc:"Community & company programs",img:"https://source.unsplash.com/400x300/?learning"}];

// Auth Section HTML
const loginHTML=`<section class="py-24 px-6 md:px-24"><h3 class="text-4xl font-bold mb-14 text-center uppercase">Login / Sign Up</h3>
<div class="max-w-md mx-auto glass p-6">
<input id="email" type="email" placeholder="Email" class="w-full mb-3 p-3 rounded bg-black/20 text-white"/>
<input id="password" type="password" placeholder="Password" class="w-full mb-3 p-3 rounded bg-black/20 text-white"/>
<div class="flex justify-between gap-2">
<button id="loginBtn" class="primary-bg px-4 py-2 rounded w-full">Login</button>
<button id="signupBtn" class="border border-white/30 px-4 py-2 rounded w-full">Sign Up</button>
</div>
<button id="logoutBtn" class="border border-red-500 px-4 py-2 rounded w-full hidden mt-2">Logout</button>
<p id="authMessage" class="text-xs opacity-60 mt-2"></p>
</div></section>`;

// Function to render section cards
function renderSection(title, data, type){
  let html=`<h3 class="text-4xl font-bold mb-10 text-center uppercase">${title}</h3><div class="grid md:grid-cols-3 gap-6">`;
  data.forEach(d=>{
    html+=`<div class="glass p-4 card-hover">
      <img src="${d.img}" class="w-full h-40 object-cover rounded mb-3"/>
      <h4 class="text-lg font-bold primary mb-1">${d.title}</h4>
      <p class="text-sm opacity-60 mb-2">${d.desc}</p>
      ${type==='course'?`<button class="px-3 py-1 bg-primary text-black rounded text-sm" onclick="showModal('${d.title}','${d.desc}','${d.img}','Enroll')">Enroll</button>`:""}
      ${type==='book'?`<div class="flex justify-between items-center"><span class="text-sm font-bold primary">₹${d.price}</span><button class="px-2 py-1 bg-primary text-black rounded text-sm" onclick="showModal('${d.title}','${d.desc}','${d.img}','Buy')">Buy</button></div>`:""}
    </div>`;
  });
  html+="</div>";
  return html;
}

// Show modal
window.showModal=(title,desc,img,action)=>{
  modalTitle.textContent=title;
  modalDesc.textContent=desc;
  modalImage.src=img;
  modalAction.textContent=action;
  modal.style.display="flex";
  modalAction.onclick=()=>{
    if(action==="Buy") alert(`Pay ₹49 via UPI for "${title}"`);
    if(action==="Enroll") alert(`Enrolled in "${title}" (Coming Soon)`);
    modal.style.display="none";
  };
};

// Router
function renderRoute(){
  const hash=location.hash.replace("#","");
  const container=document.getElementById("pageContent");
  switch(hash){
    case "courses": container.innerHTML=renderSection("Courses",courses,'course'); break;
    case "books": container.innerHTML=renderSection("Books Store",books,'book'); break;
    case "tools": container.innerHTML=renderSection("Tools",tools,'tool'); break;
    case "ctf": container.innerHTML=renderSection("CTF & Challenges",ctf,'ctf'); break;
    case "learning": container.innerHTML=renderSection("Learning Programs",learning,'learning'); break;
    case "login": container.innerHTML=loginHTML; setupAuth(); break;
    default: container.innerHTML=`<section class="text-center py-24 px-6"><h1 class="text-5xl font-bold mb-6">Welcome to Cyber Academy</h1></section>`; break;
  }
}

// Auth setup
function setupAuth(){
  const email=document.getElementById("email");
  const password=document.getElementById("password");
  const loginBtn=document.getElementById("loginBtn");
  const signupBtn=document.getElementById("signupBtn");
  const logoutBtn=document.getElementById("logoutBtn");
  const authMessage=document.getElementById("authMessage");

  signupBtn.onclick=async()=>{
    try{
      await createUserWithEmailAndPassword(auth,email.value,password.value);
      authMessage.textContent="Sign Up successful!";
      logoutBtn.classList.remove("hidden");
    }catch(e){authMessage.textContent=e.message;}
  };
  loginBtn.onclick=async()=>{
    try{
      await signInWithEmailAndPassword(auth,email.value,password.value);
      authMessage.textContent="Login successful!";
      logoutBtn.classList.remove("hidden");
    }catch(e){authMessage.textContent=e.message;}
  };
  logoutBtn.onclick=async()=>{
    await signOut(auth);
    authMessage.textContent="Logged out!";
    logoutBtn.classList.add("hidden");
  };
}

// Persist login state
onAuthStateChanged(auth,user=>{
  if(user) console.log("Logged in:",user.email);
});

// Listen to hash changes
window.addEventListener("hashchange",renderRoute);
renderRoute();

</script>

<!-- Footer -->
<footer id="contact" class="py-12 px-6 bg-black/60 text-center">
  <div class="max-w-4xl mx-auto grid md:grid-cols-3 gap-6 text-left">
    <div>
      <h4 class="mono text-sm uppercase primary mb-2">Support</h4>
      <p class="text-sm opacity-70">support@msharma.dev</p>
    </div>
    <div>
      <h4 class="mono text-sm uppercase primary mb-2">Business</h4>
      <p class="text-sm opacity-70">business@msharma.dev</p>
    </div>
    <div>
      <h4 class="mono text-sm uppercase primary mb-2">Security Reports</h4>
      <p class="text-sm opacity-70">security@msharma.dev</p>
    </div>
  </div>
  <p class="text-xs opacity-40 mt-6">© 2025 Cyber Academy. All rights reserved.</p>
</footer>

</body>
</html>
